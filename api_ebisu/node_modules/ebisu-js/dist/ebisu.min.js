var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,d=[];!(c=a.next()).done;)d.push(c.value);return d};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(d,e,k){return d==a&&"q"==e&&k==c}}));return!0===c.q}catch(d){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(d){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+c++,d)}var c=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill=function(a,c,d,e){if(c){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var k=a[e];k in d||(d[k]={});d=d[k]}a=a[a.length-1];e=d[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),m=Object.seal({}),h=new a([[b,2],[m,3]]);if(2!=h.get(b)||3!=h.get(m))return!1;h.delete(b);h.set(m,4);return!h.has(b)&&4==h.get(m)}catch(t){return!1}}function d(){}function e(b){var a=typeof b;return"object"===a&&null!==b||"function"===a}function k(b){if(!$jscomp.owns(b,g)){var a=new d;$jscomp.defineProperty(b,g,{value:a})}}function f(b){var a=Object[b];a&&(Object[b]=function(b){if(b instanceof
d)return b;k(b);return a(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var q=0,b=function(b){this.id_=(q+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};b.prototype.set=function(b,a){if(!e(b))throw Error("Invalid WeakMap key");k(b);if(!$jscomp.owns(b,g))throw Error("WeakMap key fail: "+
b);b[g][this.id_]=a;return this};b.prototype.get=function(b){return e(b)&&$jscomp.owns(b,g)?b[g][this.id_]:void 0};b.prototype.has=function(b){return e(b)&&$jscomp.owns(b,g)&&$jscomp.owns(b[g],this.id_)};b.prototype.delete=function(b){return e(b)&&$jscomp.owns(b,g)&&$jscomp.owns(b[g],this.id_)?delete b[g][this.id_]:!1};return b},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var m=c.entries(),h=m.next();if(h.done||h.value[0]!=b||"s"!=h.value[1])return!1;h=m.next();return h.done||4!=h.value[0].x||"t"!=h.value[1]||!m.next().done?!1:!0}catch(t){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbolIterator();var d=new WeakMap,e=function(b){this.data_={};this.head_=g();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};e.prototype.set=function(b,a){b=0===b?0:b;var m=k(this,b);m.list||(m.list=this.data_[m.id]=[]);m.entry?m.entry.value=a:(m.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:a},m.list.push(m.entry),this.head_.previous.next=m.entry,this.head_.previous=m.entry,this.size++);return this};e.prototype.delete=function(b){b=k(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};e.prototype.has=function(b){return!!k(this,b).entry};
e.prototype.get=function(b){return(b=k(this,b).entry)&&b.value};e.prototype.entries=function(){return f(this,function(b){return[b.key,b.value]})};e.prototype.keys=function(){return f(this,function(b){return b.key})};e.prototype.values=function(){return f(this,function(b){return b.value})};e.prototype.forEach=function(b,a){for(var m=this.entries(),c;!(c=m.next()).done;)c=c.value,b.call(a,c[1],c[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var k=function(b,a){var c=a&&typeof a;"object"==
c||"function"==c?d.has(a)?c=d.get(a):(c=""+ ++q,d.set(a,c)):c="p_"+a;var e=b.data_[c];if(e&&$jscomp.owns(b.data_,c))for(b=0;b<e.length;b++){var f=e[b];if(a!==a&&f.key!==f.key||a===f.key)return{id:c,list:e,index:b,entry:f}}return{id:c,list:e,index:-1,entry:void 0}},f=function(b,a){var c=b.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=b.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:a(c)};c=null}return{done:!0,value:void 0}})},g=function(){var b={};return b.previous=
b.next=b.head=b},q=0;return e},"es6","es3");$jscomp.polyfill("Array.from",function(a){return a?a:function(a,d,e){d=null!=d?d:function(a){return a};var c=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof f){a=f.call(a);for(var g=0;!(f=a.next()).done;)c.push(d.call(e,f.value,g++))}else for(f=a.length,g=0;g<f;g++)c.push(d.call(e,a[g],g));return c}},"es6","es3");
$jscomp.polyfill("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6","es3");
(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).ebisu=a()})(function(){return function(){function a(c,d,e){function k(g,b){if(!d[g]){if(!c[g]){var q="function"==typeof require&&require;if(!b&&q)return q(g,!0);if(f)return f(g,!0);b=Error("Cannot find module '"+g+"'");throw b.code="MODULE_NOT_FOUND",b;}b=
d[g]={exports:{}};c[g][0].call(b.exports,function(a){return k(c[g][1][a]||a)},b,b.exports,a,c,d,e)}return d[g].exports}for(var f="function"==typeof require&&require,g=0;g<e.length;g++)k(e[g]);return k}return a}()({1:[function(a,c,d){function e(a){var b=l.get(a);if(b)return b;b=p(a);l.set(a,b);return b}function k(a,b){return e(a)+e(b)-e(a+b)}function f(a,b,c,e,f,h){f=void 0===f?!0:f;var d=$jscomp.makeIterator(a),u=d.next().value,n=d.next().value;d=d.next().value;h=h||d;var t=e/d,p=h/e,w=Array.from(Array(c-
b+1),function(a,e){a=c-b;return-k(1+a-e,1+e)-Math.log(a+1)}),l=$jscomp.makeIterator([0,1,2].map(function(a){var e=Array.from(Array(c-b+1),function(c,e){return w[e]+k(n,u+t*(b+e)+a*t*p)}),f=Array.from(Array(c-b+1),function(a,b){return Math.pow(-1,b)});return m(e,f)[0]}));d=l.next().value;var r=l.next().value,v=l.next().value;l=Math.exp(r-d);v=Math.exp(v-d);d=v-Math.exp(2*(r-d));if(![l,v,d].every(function(a){return isFinite(a)&&0<=a}))throw Error(JSON.stringify({prior:a,successes:b,total:c,tnow:e,rebalance:f,
tback:h,mean:l,m2:v,sig2:d}));r=$jscomp.makeIterator(q(l,d));d=r.next().value;r=r.next().value;h=[d,r,h];return f?g(a,b,c,e,h):h}function g(a,c,e,g,d){var h=$jscomp.makeIterator(d),q=h.next().value,m=h.next().value;h.next();return q>2*m||m>2*q?(d=b(d,.5,!0),f(a,c,e,g,!1,d)):d}function q(a,b){b=a*(1-a)/b-1;return[a*b,(1-a)*b]}function b(b,c,e,f){function g(a){return k(d+h(a),q)-m-p}c=void 0===c?.5:c;e=void 0===e?!1:e;f=void 0===f?1E-4:f;if(0>c||1<c)throw Error("percentiles must be between (0, 1) exclusive");
b=$jscomp.makeIterator(b);var d=b.next().value,q=b.next().value;b=b.next().value;var m=k(d,q),p=t(c),l=e?1:6;c=-l/2;for(var n=l/2,u=g(c),r=g(n);0<u&&0<r;)c=n,u=r,n+=l,r=g(n);for(;0>u&&0>r;)n=c,r=u,c-=l,u=g(c);if(!(0<u&&0>r))throw Error("failed to bracket");if(e)return(h(c)+h(n))/2*b;e={};f=a("minimize-golden-section-1d")(function(a){return Math.abs(g(a))},{lowerBound:c,upperBound:n,tolerance:f},e);if(!e.converged)throw Error("failed to converge");return h(f)*b}var p=a("gamma").log,m=a("./logsumexp"),
h=Math.exp,t=Math.log,l=new Map;c.exports={updateRecall:f,predictRecall:function(a,b,c){c=void 0===c?!1:c;var f=$jscomp.makeIterator(a);a=f.next().value;var g=f.next().value;f=f.next().value;b=a+b/f;b=p(b)-p(b+g)+e(a+g)-e(a);return c?h(b):b},defaultModel:function(a,b,c){b=void 0===b?4:b;return[b,void 0===c?b:c,a]},modelToPercentileDecay:b}},{"./logsumexp":2,gamma:3,"minimize-golden-section-1d":4}],2:[function(a,c,d){var e=Math.exp,k=Math.log,f=Math.sign,g=Math.max;c.exports=function(a,b){for(var c=
g.apply(null,$jscomp.arrayFromIterable(a)),d=0,h=a.length-1;0<=h;h--)d+=b[h]*e(a[h]-c);a=f(d);return[k(d*a)+c,a]}},{}],3:[function(a,c,d){function e(a){if(0>a)return Number("0/0");for(var c=f[0],b=f.length-1;0<b;--b)c+=f[b]/(a+b);b=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(b)-b+Math.log(c)-Math.log(a)}var k=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],
f=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];c.exports=function b(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*b(1-a));if(100<a)return Math.exp(e(a));--a;for(var c=k[0],f=1;9>f;f++)c+=k[f]/(a+f);f=a+7+.5;return Math.sqrt(2*Math.PI)*
Math.pow(f,a+.5)*Math.exp(-f)*c};c.exports.log=e},{}],4:[function(a,c,d){var e=a("./src/golden-section-minimize"),k=a("./src/bracket-minimum"),f=[0,0];c.exports=function(a,c,b){c=c||{};var d=void 0===c.tolerance?1E-8:c.tolerance,g=void 0===c.initialIncrement?1:c.initialIncrement,h=void 0===c.lowerBound?-Infinity:c.lowerBound,t=void 0===c.upperBound?Infinity:c.upperBound,l=void 0===c.maxIterations?100:c.maxIterations;b&&(b.iterations=0,b.argmin=NaN,b.minimum=Infinity,b.converged=!1);if(isFinite(t)&&
isFinite(h))f[0]=h,f[1]=t;else if(c=void 0===c.guess?-Infinity<h?Infinity>t?.5*(h+t):h:Infinity>t?t:0:c.guess,k(f,a,c,g,h,t,l),isNaN(f[0])||isNaN(f[1]))return NaN;return e(a,f[0],f[1],d,l,b)}},{"./src/bracket-minimum":5,"./src/golden-section-minimize":6}],5:[function(a,c,d){c.exports=function(a,c,f,d,q,b,p){var e,g,k;p=1;var l=k=f;for(g=e=f=c(f);!n&&isFinite(d)&&!isNaN(d);){++p;var n=!0;e<=g&&(g=e,k=Math.max(q,k-d),e=c(k),n=!1);f<=g&&(g=f,l=Math.min(b,l+d),f=c(l),n=!1);g=Math.min(g,e,f);if(e===g&&
k===q||f===g&&l===b)n=!0;d*=4>p?2:Math.exp(.5*p);if(!isFinite(d))return a[0]=-Infinity,a[1]=Infinity,a}a[0]=k;a[1]=l;return a}},{}],6:[function(a,c,d){var e=2/(1+Math.sqrt(5));c.exports=function(a,c,d,q,b,p){for(var f=0,g=d-e*(d-c),k=c+e*(d-c),l=a(g),n=a(k),u=a(c),w=a(d),r=c,v=d;++f<b&&Math.abs(d-c)>q;)n>l?(d=k,k=g,n=l,g=d-e*(d-c),l=a(g)):(c=g,g=k,l=n,k=c+e*(d-c),n=a(k));a=.5*(d+c);c=.5*(l+n);p&&(p.iterations=f,p.argmin=a,p.minimum=c,p.converged=!0);return isNaN(n)||isNaN(l)||f===b?(p&&(p.converged=
!1),NaN):u<c?r:w<c?v:a}},{}]},{},[1])(1)});
